"use strict";(self.webpackChunkbn_gym=self.webpackChunkbn_gym||[]).push([[859],{4859:(M,v,a)=>{a.r(v),a.d(v,{AccountModule:()=>L});var s=a(433),l=a(6895),d=a(6488),e=a(1571);let Z=(()=>{class o{constructor(r){this.router=r}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:2,vars:0,consts:[[1,"col-md-6","offset-md-3","mt-5"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[d.lC],encapsulation:2}),o})();var c=a(590),f=a(7187),g=a(1585);function C(o,i){1&o&&e._UZ(0,"span",12)}const b=function(o){return{"is-invalid":o}};let N=(()=>{class o{constructor(r,t,n){this.formBuilder=r,this.accountService=t,this.alertService=n,this.loading=!1,this.submitted=!1,this.previousEmail="",this.form=r.group({title:r.control("",s.kI.required)})}ngOnInit(){const r=localStorage.getItem("previousEmail");r&&(this.previousEmail=r),this.form=this.formBuilder.group({username:[this.previousEmail??"",s.kI.required],password:["",s.kI.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear()}login(){this.form.valid&&(this.loading=!0,this.accountService.login(this.f.username.value,this.f.password.value).pipe((0,c.P)()).subscribe({next:()=>{window.location.href="/checkIn-history/view-checkins-by-date",this.saveEmail(this.f.username.value)},error:r=>{this.alertService.error(r.error.error),this.loading=!1}}))}saveEmail(r){this.previousEmail=r,localStorage.setItem("previousEmail",this.previousEmail)}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(s.qu),e.Y36(f.B),e.Y36(g.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:17,vars:10,consts:[[1,"card",2,"width","740px","margin","auto"],[1,"card-header"],[1,"card-body"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"form-group",2,"width","700px"],["for","username"],["type","text","formControlName","username","required","",1,"form-control",3,"ngClass","value"],["for","password"],["type","password","formControlName","password","required","",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Prijavi se"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return t.login()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Email"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",4)(10,"label",7),e._uU(11,"Lozinka"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.TgZ(13,"div",9)(14,"button",10),e.YNc(15,C,1,0,"span",11),e._uU(16," Prijavi se "),e.qZA()()()()()),2&r&&(e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(4),e.s9C("value",t.previousEmail),e.Q6J("ngClass",e.VKq(6,b,t.submitted&&t.f.username.errors)),e.xp6(4),e.Q6J("ngClass",e.VKq(8,b,t.submitted&&t.f.password.errors)),e.xp6(2),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.loading))},dependencies:[l.mk,l.O5,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u],encapsulation:2}),o})();var w=a(446),P=a(529);let y=(()=>{class o{constructor(r){this.http=r,this.baseUrl=`${w._}/User`}getUserData(r){return this.http.get(this.baseUrl+"/"+r)}update(r,t){return this.http.put(this.baseUrl+"/"+r,t)}}return o.\u0275fac=function(r){return new(r||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class q{constructor(){this.firstname="",this.lastname="",this.email=""}}let U=(()=>{class o{constructor(r){this.http=r,this.baseUrl=`${w._}/GymWorker`}addGymWorker(r){let t=new q;return t.email=r.email,t.firstname=r.firstName,t.lastname=r.lastName,console.log("Method addGymWorker from gymWorkerService worked!"),this.http.post(this.baseUrl,t)}getAllWorkers(r,t,n,u){return this.http.get(this.baseUrl+`?PageSize=${r}&Page=${t}&SearchString=${n}&SortOrder=${u}`)}getWorker(r){return this.http.get(this.baseUrl+"/"+r)}update(r,t){return this.http.put(this.baseUrl+"/"+r,t)}block(r){return this.http.delete(this.baseUrl+"/"+r)}activate(r){return this.http.put(this.baseUrl+"/activate/"+r,void 0)}}return o.\u0275fac=function(r){return new(r||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function k(o,i){1&o&&e._UZ(0,"span",11)}function T(o,i){1&o&&e._UZ(0,"span",11)}function I(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div")(1,"button",12),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.changePasswordVisibleEnable())}),e.YNc(2,T,1,0,"span",9),e._uU(3," Promijeni lozinku "),e.qZA()()}if(2&o){const r=e.oxw();e.xp6(2),e.Q6J("ngIf",r.loading)}}function S(o,i){1&o&&e._UZ(0,"span",11)}const m=function(o){return{"is-invalid":o}};function A(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div")(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.changePassword())}),e.TgZ(2,"div")(3,"div",3)(4,"div")(5,"span"),e._uU(6,"Trenutna lozinka"),e.qZA()(),e._UZ(7,"input",13),e.qZA()(),e.TgZ(8,"div")(9,"div",3)(10,"div")(11,"span"),e._uU(12,"Nova Lozinka"),e.qZA()(),e._UZ(13,"input",14),e.qZA()(),e.TgZ(14,"div")(15,"div",3)(16,"div")(17,"span"),e._uU(18,"Potvrdite lozinku"),e.qZA()(),e._UZ(19,"input",15),e.TgZ(20,"span",16),e._uU(21,"Nova lozinka mora da sadr\u017ei najmanje 8 karaktera, barem jedno veliko slovo i barem jedan broj!"),e.qZA()()(),e.TgZ(22,"div",7)(23,"button",8),e.YNc(24,S,1,0,"span",9),e._uU(25," Promijeni lozinku "),e.qZA()()()()}if(2&o){const r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.formPasswordChange),e.xp6(6),e.Q6J("ngClass",e.VKq(6,m,r.submitted&&r.g.currentPassword.errors)),e.xp6(6),e.Q6J("ngClass",e.VKq(8,m,r.submitted&&r.g.newPassword.errors)),e.xp6(6),e.Q6J("ngClass",e.VKq(10,m,r.submitted&&r.g.confirmNewPassword.errors)),e.xp6(4),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)}}function z(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Lozinka je obavezna"),e.qZA())}function x(o,i){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,z,2,0,"div",14),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.password.errors.required)}}function Q(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Lozinke moraju biti iste"),e.qZA())}function F(o,i){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,Q,2,0,"div",14),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.confirmedPassword.errors.required)}}function Y(o,i){1&o&&e._UZ(0,"span",15)}const _=function(o){return{"is-invalid":o}},G=[{path:"",component:Z,children:[{path:"login",component:N},{path:"profile/:id",component:(()=>{class o{constructor(r,t,n,u,p){this.route=r,this.userService=t,this.gymWorkerService=n,this.alertService=u,this.accountService=p,this.userid=0,this.model={},this.changePasswordModel={},this.form=new s.cw({firstName:new s.NI("",s.kI.required),lastName:new s.NI("",s.kI.required),email:new s.NI("",s.kI.required)}),this.formPasswordChange=new s.cw({currentPassword:new s.NI("",s.kI.required),newPassword:new s.NI("",s.kI.required),confirmNewPassword:new s.NI("",s.kI.required)}),this.submitted=!1,this.loading=!1,this.userId="",this.changePasswordVisible=!1}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserInfo()}getUserInfo(){this.userService.getUserData(+this.userId).subscribe(r=>{this.model=r})}onSubmit(){this.submitted=!0,this.alertService.clear()}get f(){return this.form.controls}get g(){return this.formPasswordChange.controls}update(){""!=this.f.firstName.value&&(this.model.firstName=this.f.firstName.value),""!=this.f.lastName.value&&(this.model.lastName=this.f.lastName.value),""!=this.f.email.value&&(this.model.email=this.f.email.value),this.gymWorkerService.update(this.model.id,this.model).pipe((0,c.P)()).subscribe({next:r=>{this.alertService.success("Profil korisnika uspije\u0161no a\u017euriran!")},error:r=>{this.alertService.error(r.error.message),this.loading=!1}})}changePasswordVisibleEnable(){this.changePasswordVisible=!0}changePassword(){""!=this.g.currentPassword.value&&(this.changePasswordModel.currentPassword=this.g.currentPassword.value),""!=this.g.newPassword.value&&(this.changePasswordModel.newPassword=this.g.newPassword.value),""!=this.g.confirmNewPassword.value&&(this.changePasswordModel.confirmNewPassword=this.g.confirmNewPassword.value),this.changePasswordModel.id=this.model.id,this.accountService.changePassword(this.changePasswordModel).pipe((0,c.P)()).subscribe({next:r=>{this.alertService.success("Promijenjna lozinka!"),this.changePasswordVisible=!1},error:r=>{this.alertService.error(r.error.message),this.loading=!1}})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(d.gz),e.Y36(y),e.Y36(U),e.Y36(g.c),e.Y36(f.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:27,vars:18,consts:[[2,"text-align","center"],[2,"margin","auto","width","750px"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[2,"width","700px"],["formControlName","firstName","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"value","ngClass"],["formControlName","lastName","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"value","ngClass"],["formControlName","email","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"value","ngClass"],[1,"form-group"],[1,"btn","btn-primary",2,"margin-top","2%",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"btn","btn-primary",2,"margin-top","2%",3,"click"],["formControlName","currentPassword","type","password","aria-label","Default","aria-describedby","inputGroup-sizing-default","placeholder","Trenutna lozinka","required","",1,"form-control",3,"ngClass"],["formControlName","newPassword","type","password","aria-label","Default","aria-describedby","inputGroup-sizing-default","placeholder","Nova lozinka","required","",1,"form-control",3,"ngClass"],["formControlName","confirmNewPassword","type","password","aria-label","Default","aria-describedby","inputGroup-sizing-default","placeholder","Potvrdite lozinku","required","",1,"form-control",3,"ngClass"],[2,"color","orange"]],template:function(r,t){1&r&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e._UZ(2,"hr")(3,"br"),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return t.update()}),e.TgZ(6,"div",3)(7,"div")(8,"span"),e._uU(9,"Ime"),e.qZA()(),e._UZ(10,"input",4),e.qZA(),e.TgZ(11,"div",3)(12,"div")(13,"span"),e._uU(14,"Prezime"),e.qZA()(),e._UZ(15,"input",5),e.qZA(),e.TgZ(16,"div",3)(17,"div")(18,"span"),e._uU(19,"Email"),e.qZA()(),e._UZ(20,"input",6),e.qZA(),e.TgZ(21,"div",7)(22,"button",8),e.YNc(23,k,1,0,"span",9),e._uU(24," Promijeni "),e.qZA()()(),e.YNc(25,I,4,1,"div",10),e.YNc(26,A,26,12,"div",10),e.qZA()),2&r&&(e.xp6(1),e.hij("Profil: ",t.model.firstName,""),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(5),e.s9C("value",null==t.model?null:t.model.firstName),e.Q6J("ngClass",e.VKq(12,m,t.submitted&&t.f.firstName.errors)),e.xp6(5),e.s9C("value",null==t.model?null:t.model.lastName),e.Q6J("ngClass",e.VKq(14,m,t.submitted&&t.f.lastName.errors)),e.xp6(5),e.s9C("value",null==t.model?null:t.model.email),e.Q6J("ngClass",e.VKq(16,m,t.submitted&&t.f.email.errors)),e.xp6(2),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(2),e.Q6J("ngIf",!t.changePasswordVisible),e.xp6(1),e.Q6J("ngIf",t.changePasswordVisible))},dependencies:[l.mk,l.O5,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u]}),o})()},{path:"forgot-password",component:(()=>{class o{constructor(r,t,n,u,p){this.formBuilder=r,this.route=t,this.router=n,this.accountService=u,this.alertService=p,this.loading=!1,this.submitted=!1,this.form=r.group({title:r.control("",s.kI.required)})}ngOnInit(){this.form=this.formBuilder.group({password:["",s.kI.required],confirmPassword:["",s.kI.required]})}get f(){return this.form.controls}newPassword(){if(!this.form.valid)return;this.loading=!0;const r=this.route.snapshot.queryParamMap.get("email"),t=this.route.snapshot.queryParamMap.get("token");this.accountService.resetPassword({password:this.f.password.value,confirmPassword:this.f.confirmPassword.value,token:t,email:r}).pipe((0,c.P)()).subscribe({next:()=>{this.router.navigateByUrl("/home")},error:u=>{this.alertService.error(u.error.error),this.loading=!1}})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(s.qu),e.Y36(d.gz),e.Y36(d.F0),e.Y36(f.B),e.Y36(g.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-forgot-pass"]],decls:19,vars:11,consts:[[1,"card",2,"width","740px"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group",2,"width","700px"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","confirmPassword"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Nova lozinka"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return t.newPassword()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Lozinka"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,x,2,1,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12,"Ponovi Lozinka"),e.qZA(),e._UZ(13,"input",9),e.YNc(14,F,2,1,"div",7),e.qZA(),e.TgZ(15,"div",10)(16,"button",11),e.YNc(17,Y,1,0,"span",12),e._uU(18," Promeni lozinku "),e.qZA()()()()()),2&r&&(e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngClass",e.VKq(7,_,t.submitted&&t.f.password.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.password.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(9,_,t.submitted&&t.f.confirmPassword.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.password.errors),e.xp6(2),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.loading))},dependencies:[l.mk,l.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),o})()}]}];let j=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(G),d.Bz]}),o})();var h=a(3175);let L=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:h.A4,useValue:h.A4},h.N0],imports:[l.ez,s.UX,j]}),o})()}}]);