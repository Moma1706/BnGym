"use strict";(self.webpackChunkbn_gym=self.webpackChunkbn_gym||[]).push([[27],{1027:(te,b,s)=>{s.r(b),s.d(b,{DailyTrainingModule:()=>W});var m=s(6895),e=s(1571),u=s(6488);let Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-daily-training"]],decls:2,vars:0,consts:[[1,"col-md-6","offset-md-3","mt-5"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[u.lC]}),t})();var n=s(433),h=s(590),_=s(446),A=s(529);let g=(()=>{class t{constructor(i){this.http=i,this.baseUrl=`${_._}/DailyUser`}addTraining(i){return this.http.post(this.baseUrl,i)}getAllDailyTrainings(i,a,l,d){return this.http.get(this.baseUrl+"/users/"+`?PageSize=${i}&Page=${a}&SearchString=${l}&SortOrder=${d}`)}getTraining(i){return this.http.get(this.baseUrl+"/"+i)}update(i,a){return this.http.put(this.baseUrl+"/"+i,a)}addArrival(i){return this.http.post(this.baseUrl+"/arrival/"+i,void 0)}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(A.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var D=s(1585);function U(t,r){1&t&&e._UZ(0,"span",10)}const y=function(t){return{"is-invalid":t}};let w=(()=>{class t{constructor(i,a,l,d){this.formBuilder=i,this.router=a,this.dailyTrainingService=l,this.alertService=d,this.model={},this.submitted=!1,this.loading=!1,this.form=this.formBuilder.group({title:this.formBuilder.control("initial value",n.kI.required)})}ngOnInit(){this.form=this.formBuilder.group({firstname:["",n.kI.required],lastname:["",n.kI.required],dateOfBirth:[(0,m.p6)(new Date,"dd/MM/yyyy","en"),n.kI.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear()}save(){this.model.firstName=this.f.firstname.value,this.model.lastName=this.f.lastname.value,this.model.dateOfBirth=this.f.dateOfBirth.value,this.dailyTrainingService.addTraining(this.model).pipe((0,h.P)()).subscribe({next:()=>{this.router.navigateByUrl("/daily-training/view-all-daily"),this.alertService.success("Dodat dnevni korisnik!")},error:i=>{this.alertService.error(i.error.message),this.loading=!1}})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(n.qu),e.Y36(u.F0),e.Y36(g),e.Y36(D.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-daily-training"]],decls:25,vars:12,consts:[[2,"text-align","center"],[2,"margin","auto","width","750px"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[2,"width","700px"],["formControlName","firstname","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","placeholder","Enter First Name...","required","",1,"form-control",3,"ngClass"],["formControlName","lastname","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","placeholder","Enter Last Name...","required","",1,"form-control",3,"ngClass"],["formControlName","dateOfBirth","type","date","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(i,a){1&i&&(e.TgZ(0,"h2",0),e._uU(1,"Novi Dnevni Korisnik"),e.qZA(),e._UZ(2,"hr")(3,"br"),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return a.save()}),e.TgZ(6,"div",3)(7,"div")(8,"span"),e._uU(9,"Ime"),e.qZA()(),e._UZ(10,"input",4),e.qZA(),e.TgZ(11,"div",3)(12,"div")(13,"span"),e._uU(14,"Prezime"),e.qZA()(),e._UZ(15,"input",5),e.qZA(),e.TgZ(16,"div",3)(17,"div")(18,"span"),e._uU(19,"Datum Rodjenja"),e.qZA()(),e._UZ(20,"input",6),e.qZA(),e.TgZ(21,"div",7)(22,"button",8),e.YNc(23,U,1,0,"span",9),e._uU(24," Dodaj korisnika "),e.qZA()()()()),2&i&&(e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(5),e.Q6J("ngClass",e.VKq(6,y,a.submitted&&a.f.firstname.errors)),e.xp6(5),e.Q6J("ngClass",e.VKq(8,y,a.submitted&&a.f.lastname.errors)),e.xp6(5),e.Q6J("ngClass",e.VKq(10,y,a.submitted&&a.f.dateOfBirth.errors)),e.xp6(2),e.Q6J("disabled",a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[m.mk,m.O5,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u]}),t})();var v=s(1581),f=s(6308),o=s(7155),N=s(8675),V=s(3900),q=s(262),k=s(4004),C=s(9549),T=s(4144);const S=function(){return["/daily-training/add-daily-training"]};function B(t,r){1&t&&(e.TgZ(0,"div")(1,"button",18),e._uU(2," Dodaj Korisnika "),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,S)))}function O(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"mat-header-cell",19),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.getRecord())}),e._uU(1," Ime "),e.qZA()}}function J(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const i=r.$implicit;e.xp6(1),e.hij(" ",i.firstName," ")}}function I(t,r){1&t&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Prezime "),e.qZA())}function Q(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const i=r.$implicit;e.xp6(1),e.hij(" ",i.lastName," ")}}function j(t,r){1&t&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Datum rodjenja "),e.qZA())}function z(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const i=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,i.dateOfBirth,"dd/MM/yyyy")," ")}}function Y(t,r){1&t&&e._UZ(0,"mat-header-cell")}const x=function(t){return["/daily-training/view-daily-user",t]};function M(t,r){if(1&t&&(e.TgZ(0,"button",22),e._uU(1," Pogledaj "),e.qZA()),2&t){const i=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,x,i.id))}}function G(t,r){if(1&t&&(e.TgZ(0,"mat-cell",20),e.YNc(1,M,2,3,"button",21),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.visible)}}function F(t,r){1&t&&e._UZ(0,"mat-header-row")}function K(t,r){1&t&&e._UZ(0,"mat-row")}const L=function(){return[5,10,15,50,100]};function R(t,r){1&t&&e._UZ(0,"span",13)}function $(t,r){1&t&&e._UZ(0,"span",13)}const p=function(t){return{"is-invalid":t}},H=[{path:"",component:Z,children:[{path:"add-daily-training",component:w},{path:"view-all-daily",component:(()=>{class t{constructor(i){this.dailyService=i,this.visible=!0,this.id="",this.pageSize=5,this.pageNumber=1,this.searchText="",this.loading=!1,this.totalUsers=0,this.pageSizeOption=[5,10,25,50,100],this.EmpData=[],this.filterValue="",this.model={},this.submitted=!1,this.displayedColumns=["firstName","lastName","dateOfBirth","Buttons"],this.dataSource=new o.by,this.sort=new f.YE}ngOnInit(){}ngAfterViewInit(){this.getData("","desc"!==this.sort.direction?0:1)}getTableData$(i,a,l,d){return this.dailyService.getAllDailyTrainings(a,i,l,d)}applyFilter(i){this.filterValue=i.target.value,this.filterValue=this.filterValue.trim(),this.filterValue=this.filterValue.toLowerCase(),this.getData(this.filterValue,"desc"!==this.sort.direction?0:1)}getData(i,a){this.dataSource.paginator=this.paginator,this.paginator&&this.paginator.page.pipe((0,N.O)({}),(0,V.w)(()=>(this.loading=!0,this.getTableData$(this.paginator.pageIndex+1,this.paginator.pageSize,i,a).pipe((0,q.K)(()=>function P(t){throw new Error("Function not implemented.")}())))),(0,k.U)(l=>null==l?[]:(this.totalUsers=l.count,this.loading=!1,l.items))).subscribe(l=>{this.EmpData=l,this.dataSource=new o.by(this.EmpData),this.dataSource.sort=this.sort})}getRecord(){this.getData(this.filterValue,"desc"!==this.sort.direction?0:1)}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-view-all-daily"]],viewQuery:function(i,a){if(1&i&&(e.Gf(v.NW,5),e.Gf(f.YE,5)),2&i){let l;e.iGM(l=e.CRH())&&(a.paginator=l.first),e.iGM(l=e.CRH())&&(a.sort=l.first)}},decls:26,vars:7,consts:[[2,"padding-top","3%"],[4,"ngIf"],[1,"example-header"],["matInput","","placeholder","Trazi",3,"keyup"],[1,"example-container","mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","firstName"],["mat-sort-header","",3,"click",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastName"],[4,"matHeaderCellDef"],["matColumnDef","dateOfBirth"],["matColumnDef","Buttons"],["class","mat-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],["type","button",1,"btn","btn-primary",3,"routerLink"],["mat-sort-header","",3,"click"],[1,"mat-cell"],["mat-stroked-button","","color","warn","class","btn btn-secondary",3,"routerLink",4,"ngIf"],["mat-stroked-button","","color","warn",1,"btn","btn-secondary",3,"routerLink"]],template:function(i,a){1&i&&(e.TgZ(0,"h2",0),e._uU(1,"Dnevni Korisnici"),e.qZA(),e._UZ(2,"br"),e.YNc(3,B,3,2,"div",1),e._UZ(4,"br"),e.TgZ(5,"div",2)(6,"mat-form-field")(7,"input",3),e.NdJ("keyup",function(d){return a.applyFilter(d)}),e.qZA()()(),e.TgZ(8,"div",4)(9,"mat-table",5),e.ynx(10,6),e.YNc(11,O,2,0,"mat-header-cell",7),e.YNc(12,J,2,1,"mat-cell",8),e.BQk(),e.ynx(13,9),e.YNc(14,I,2,0,"mat-header-cell",10),e.YNc(15,Q,2,1,"mat-cell",8),e.BQk(),e.ynx(16,11),e.YNc(17,j,2,0,"mat-header-cell",10),e.YNc(18,z,3,4,"mat-cell",8),e.BQk(),e.ynx(19,12),e.YNc(20,Y,1,0,"mat-header-cell",10),e.YNc(21,G,2,1,"mat-cell",13),e.BQk(),e.YNc(22,F,1,0,"mat-header-row",14),e.YNc(23,K,1,0,"mat-row",15),e.qZA()(),e._UZ(24,"mat-paginator",16,17)),2&i&&(e.xp6(3),e.Q6J("ngIf",a.visible),e.xp6(6),e.Q6J("dataSource",a.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",a.totalUsers)("pageSizeOptions",e.DdM(6,L)))},dependencies:[m.O5,u.rH,o.BZ,o.fO,o.as,o.w1,o.Dz,o.nj,o.ge,o.ev,o.XQ,o.Gk,v.NW,C.KE,T.Nt,f.YE,f.nU,m.uU]}),t})()},{path:"view-daily-user/:id",component:(()=>{class t{constructor(i,a,l,d,c){this.route=i,this.dailyService=a,this.formBuilder=l,this.router=d,this.alertservice=c,this.model={},this.id="",this.splited=[],this.numberOfMonths=0,this.mjeseci=[.5,1,3,6,12],this.submitted=!1,this.loading=!1,this.form=this.formBuilder.group({title:this.formBuilder.control("initial value",n.kI.required)})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getUser(this.id??""),this.form=this.formBuilder.group({firstname:["",n.kI.required],lastname:["",n.kI.required],mberOfArrivalsCurrentMonth:["",n.kI.required],mberOfArrivalsLastMonth:["",n.kI.required],dateOfBirth:["",n.kI.required],lastCheckIn:["",n.kI.required]})}get f(){return this.form.controls}getUser(i){this.dailyService.getTraining(i).subscribe(a=>{this.model=a;let l=this.model.dateOfBirth.toString();this.splited=l.split("T",2),this.model.dateOfBirth=this.splited[0];let d=new Date(this.model.lastCheckIn);const c=60*d.getTimezoneOffset()*1e3;let ee=new Date(d.getTime()-c).toLocaleString();this.model.lastCheckIn=ee})}update(){""!=this.f.firstname.value&&(this.model.firstName=this.f.firstname.value),""!=this.f.lastname.value&&(this.model.lastName=this.f.lastname.value),""!=this.f.dateOfBirth.value&&(this.model.dateOfBirth=this.f.dateOfBirth.value),this.dailyService.update(this.model.id,this.model).pipe((0,h.P)()).subscribe({next:i=>{this.router.navigateByUrl("/daily-training/view-all-daily"),this.alertservice.success("Profil korisnika promenjen!")},error:i=>{this.alertservice.error(i.error.message),this.loading=!1}})}addArrival(){this.dailyService.addArrival(this.model.id).pipe((0,h.P)()).subscribe({next:i=>{this.router.navigateByUrl("/checkIn-history/view-checkins-by-date"),this.alertservice.success("Evidentiran dolazak za korisnika: "+this.model.firstname+"!")},error:i=>{this.alertservice.error(i.error.message),this.loading=!1}})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(u.gz),e.Y36(g),e.Y36(n.qu),e.Y36(u.F0),e.Y36(D.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-view-daily-user"]],decls:44,vars:30,consts:[[2,"text-align","center"],[2,"margin","auto","width","750px"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[2,"width","700px"],["formControlName","firstname","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"value","ngClass"],["formControlName","lastname","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"value","ngClass"],["formControlName","dateOfBirth","type","date","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","",1,"form-control",3,"value","ngClass"],["formControlName","lastCheckIn","type","text","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","","readonly","",1,"form-control",3,"value","ngClass"],["formControlName","mberOfArrivalsCurrentMonth","type","number","aria-label","Default","aria-describedby","inputGroup-sizing-default","required","","readonly","",1,"form-control",3,"value","ngClass"],[1,"form-group"],[1,"btn","btn-primary",2,"margin-top","2%",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"btn","btn-primary",2,"margin-top","2%",3,"disabled","click"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(i,a){1&i&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e._UZ(2,"hr")(3,"br"),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return a.update()}),e.TgZ(6,"div",3)(7,"div")(8,"span"),e._uU(9,"Ime"),e.qZA()(),e._UZ(10,"input",4),e.qZA(),e.TgZ(11,"div",3)(12,"div")(13,"span"),e._uU(14,"Prezime"),e.qZA()(),e._UZ(15,"input",5),e.qZA(),e.TgZ(16,"div",3)(17,"div")(18,"span"),e._uU(19,"Datum rodjenja"),e.qZA()(),e._UZ(20,"input",6),e.qZA(),e.TgZ(21,"div",3)(22,"div")(23,"span"),e._uU(24,"Poslednje prijavljivanje"),e.qZA()(),e._UZ(25,"input",7),e.qZA(),e.TgZ(26,"div",3)(27,"div")(28,"span"),e._uU(29,"Broj dolazaka ovog mjeseca"),e.qZA()(),e._UZ(30,"input",8),e.qZA(),e.TgZ(31,"div",3)(32,"div")(33,"span"),e._uU(34,"Broj dolazaka pro\u0161log mjeseca"),e.qZA()(),e._UZ(35,"input",8),e.qZA(),e.TgZ(36,"div",9)(37,"button",10),e.YNc(38,R,1,0,"span",11),e._uU(39," Promijeni "),e.qZA()()(),e.TgZ(40,"div",9)(41,"button",12),e.NdJ("click",function(){return a.addArrival()}),e.YNc(42,$,1,0,"span",11),e._uU(43," Dodaj Dolazak "),e.qZA()()()),2&i&&(e.xp6(1),e.hij("Dnevni korisnik: ",a.model.firstName,""),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(5),e.s9C("value",a.model.firstName),e.Q6J("ngClass",e.VKq(18,p,a.submitted&&a.f.firstname.errors)),e.xp6(5),e.s9C("value",a.model.lastName),e.Q6J("ngClass",e.VKq(20,p,a.submitted&&a.f.lastname.errors)),e.xp6(5),e.s9C("value",a.model.dateOfBirth),e.Q6J("ngClass",e.VKq(22,p,a.submitted&&a.f.dateOfBirth.errors)),e.xp6(5),e.s9C("value",a.model.lastCheckIn),e.Q6J("ngClass",e.VKq(24,p,a.submitted&&a.f.lastCheckIn.errors)),e.xp6(5),e.s9C("value",a.model.numberOfArrivalsCurrentMonth),e.Q6J("ngClass",e.VKq(26,p,a.submitted&&a.f.numberOfArrivalsCurrentMonth.errors)),e.xp6(5),e.s9C("value",a.model.numberOfArrivalsLastMonth),e.Q6J("ngClass",e.VKq(28,p,a.submitted&&a.f.numberOfArrivalsLastMonth.errors)),e.xp6(2),e.Q6J("disabled",a.loading),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(3),e.Q6J("disabled",a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[m.mk,m.O5,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u]}),t})()}]}];let X=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(H),u.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,X,n.UX,o.p0,v.TU,C.lN,T.c,f.JX]}),t})()}}]);